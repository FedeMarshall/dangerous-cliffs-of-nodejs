<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>the dangerous cliffs of node.js</title><meta name="description" content="Some common but surprisingly impactful or difficult to deal with errors in Node.js"><meta name="author" content="Scott Nonnenberg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><link rel="stylesheet" href="css/reveal.min.css"><link rel="stylesheet" href="css/theme/default.css" id="theme"><link rel="stylesheet" href="css/zenburn.css"><script>document.write( "<link rel='stylesheet' href='css/" +
 ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + ".css' type='text/css' media='print'>" );
 </script><style>.center {
  display: inline-block;
  margin-left: auto;
  margin-right: auto;
}
.runner {
  position: relative;
}
a.run {
  position: absolute;
  bottom: .5em;
  right: 2em;
}
.reveal a.run:not(.image) {
  color: white;
}
.reveal .spacer {
  margin-top: 1em;
}
.reveal th, .reveal td {
  padding: .3em;
}
.reveal th {
  font-weight: bold;
}
.reveal img.plain {
  border: 0;
  box-shadow: none;
  background: none;
}
.reveal img.max {
  width: 95%;
}
.reveal .small {
  text-align: center;
  font-size: 60%;
}

</style></head><body><div class="reveal"><div class="slides"><section><h1>The Dangerous Cliffs of Node.js</h1><h3 class="spacer">Because production-ready is not easy!</h3><h3 class="spacer"><a target="_blank" href="https://scottnonnenberg.com">Scott Nonnenberg</a></h3><h4><a target="_blank" href="http://scottnonnenberg.github.io/dangerous-cliffs-of-nodejs/dist/slides.html">github.com/scottnonnenberg/dangerous-cliffs-of-nodejs</a></h4><div class="center small">'space'/arrow keys/swipe to navigate, 'esc' to zoom out, 's' for speaker notes</div></section><section><section><h1>Why me?</h1><aside class="notes"><ul><li>History with other platforms like Rails, iOS, .NET, Java</li><li>Developing in node.js for over three years now</li><li>Own apps, and freelance...</li></ul></aside></section><section><h2>Walmart Labs</h2><h2>Nordstrom Innovation Lab</h2><h2>HaikuDeck</h2><h2>MuleSoft</h2></section><section><h2>Classic ASP</h2><h2>C++</h2><h2>Java</h2><h2>.NET</h2><h2>iOS</h2><h2>Ruby on Rails</h2></section></section><section><section><h1>Why this topic?</h1></section><section><h1>The gap</h1><aside class="notes"><ul><li>Lots of content tutorials/feature implementation</li><li>Much less about getting to production-ready</li></ul></aside></section><section><h1>How about a hike?</h1><aside class="notes"><ul><li>Node.js is like...</li><li>A friend says to you... </li><li>Come on this hike with me! So great!</li></ul></aside></section><section><img src="img/huashin trail.jpg" class="max"><aside class="notes"><ul><li>But then the trail is like this!</li><li>Your friend says "Oh yeah, we had some trouble the first couple times too..."</li><li>Node.js has some unique challenges.</li></ul></aside></section></section><section><img src="img/beware dangerous cliff.jpg" class="max"><aside class="notes"><ul><li>Let's put some signs up to help our fellow hikers!</li></ul></aside></section><section><section><h1>Crashes</h1><aside class="notes"><ul><li>What do we mean by this?</li><li>Calling a non-function</li><li>Dotting into a null/undefined var</li></ul></aside></section><section><h1>Demo: Crashes</h1></section><section><h1>Benefit?</h1><h1>Impact</h1><aside class="notes"><ul><li>Took it down to low/medium</li></ul></aside></section><section><h1>Deployment</h1></section></section><section><img src="img/cliff edges are dangerous.jpg" class="max"></section><section><section><h1>Hangs</h1></section><section><h1>Demo: Hangs</h1></section><section><h1>Benefit?</h1><h1>Detection</h1><aside class="notes"><ul><li>Now we know when it's happening...</li></ul></aside></section><section><h1>non-server apps</h1><aside class="notes"><ul><li>MUST have logging and/or stats collection</li><li>BOTH positive and negative metrics</li><li>if just errors, the process could be hanging or not running and you'd never know</li></ul></aside></section></section><section><img src="img/dangerous cliffs.jpg" class="max"></section><section><section><h1>Event loop unavailability</h1></section><section><h1>Demo: Event loop</h1></section><section><h1>Benefit?</h1><h1>Prevention</h1><h1>Detection</h1><aside class="notes"><ul><li>no magic solution for event loop that's slowing down</li><li>best we can do is try to plan for it, and monitor closely</li></ul></aside></section></section><section><img src="img/steep and crumbling cliffs.jpg" class="max"></section><section><section><h1>Error from</h1><h1>async call</h1></section><section><h1>Demo</h1></section><section><h1>Benefit?</h1><h1>Debuggability</h1><aside class="notes"><ul><li>We can make it easier to see what happened, if we can't prevent it</li></ul></aside></section></section><section><img src="img/rocky trail.jpg" class="max"></section><section><section>   <h1>prevention</h1><h1>impact mitigation</h1><h1>detection</h1><h1>debuggability</h1></section></section><section><h1>Better node.js understanding?</h1><aside class="notes"><ul><li>Edge cases help you understand the system!</li></ul></aside></section><section><h1>Thanks!</h1><aside class="notes"><ul><li>Go forth and make awesome things!</li></ul></aside></section><section><h1>Questions?</h1></section><section><img src="img/sheer unstable cliffs.jpg" class="max"></section><section><section><h1>Hammering other services</h1></section><section><h1>Demo</h1></section><section><h1>Benefit?</h1><h1>Everyone's Happy</h1><aside class="notes"><ul><li>let's be nice, everyone.</li><li>node.js is really good at parallelizing, some aren't</li></ul></aside></section></section><section><h2>Image sources</h2><ul><li>huashin trail</li><li>beware dangerous cliff</li><li>cliff edges are dangerous</li><li>dangerous cliffs</li><li>sheer unstable cliffs</li><li>steep and crumbling cliffs</li><li>rocky trail</li></ul></section><section><h2>Know your libraries!</h2><ul><li><a href="https://mongodb.github.io/node-mongodb-native/driver-articles/mongoclient.html#connection-pool-configuration">mongodb</a> - connection pool, default size of 5</li><li><a href="https://github.com/brianc/node-postgres/wiki/pg#pgdefaultspoolsize">pg</a> - connection pool, default size of 10</li><li><a href="https://github.com/felixge/node-mysql/#pool-options">mysql</a> - connection pool, default size of 10</li><li><a href="https://github.com/NodeRedis/node_redis/blob/master/examples/backpressure_drain.js">redis</a> - queues up extra commands</li></ul></section></div></div><script src="js/head.min.js"></script><script src="js/reveal.min.js"></script><script>Reveal.initialize({
  controls: false,
  progress: true,
  history: true,
  center: true,
  overview: true,
  
  theme: 'default',
  transition: 'linear',
  
  dependencies: [
    { src: 'js/classList.js', condition: function() { return !document.body.classList; } },
    { src: 'lib/notes/notes.js', async: true },
  ],
  
  // The "normal" size of the presentation, aspect ratio will be preserved
  // when the presentation is scaled to fit different resolutions. Can be
  // specified using percentage units.
  width: 800,
  height: 600,
  
  // Factor of the display size that should remain empty around the content
  margin: 0.1,
  
  // Bounds for smallest/largest possible scale to apply to content
  minScale: 0.2,
  maxScale: 3.0
});</script></body></html>